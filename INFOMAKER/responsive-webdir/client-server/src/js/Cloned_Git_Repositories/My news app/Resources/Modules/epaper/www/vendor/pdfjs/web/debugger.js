"use strict";var e=function(){function i(){var e=document.querySelectorAll("div["+r+"]");for(var t=0,n=e.length;t<n;++t){var i=e[t];i.className=""}}function s(){var e=document.querySelectorAll("div["+r+"]");for(var t=0,n=e.length;t<n;++t){var i=e[t];i.className="debuggerHideText"}}function o(e,t){var n=document.querySelectorAll("div["+r+"="+e+"]");for(var i=0,s=n.length;i<s;++i){var o=n[i];o.className=t?"debuggerShowText":"debuggerHideText"}}function u(e){if(!e.target.dataset.fontName||e.target.tagName.toUpperCase()!=="DIV")return;var t=e.target.dataset.fontName,n=document.getElementsByTagName("input");for(var r=0;r<n.length;++r){var i=n[r];if(i.dataset.fontName!==t)continue;i.checked=!i.checked,o(t,i.checked),i.scrollIntoView()}}var t,n=!1,r="data-font-name";return{id:"FontInspector",name:"Font Inspector",panel:null,manager:null,init:function(n){var r=this.panel;r.setAttribute("style","padding: 5px;");var i=document.createElement("button");i.addEventListener("click",s),i.textContent="Refresh",r.appendChild(i),t=document.createElement("div"),r.appendChild(t)},cleanup:function(){t.textContent=""},enabled:!1,get active(){return n},set active(e){n=e,n?(document.body.addEventListener("click",u,!0),s()):(document.body.removeEventListener("click",u,!0),i())},fontAdded:function(n,r){function i(e,t){var n=document.createElement("table");for(var r=0;r<t.length;r++){var i=document.createElement("tr"),s=document.createElement("td");s.textContent=t[r],i.appendChild(s);var o=document.createElement("td");o.textContent=e[t[r]].toString(),i.appendChild(o),n.appendChild(i)}return n}var u=i(n,["name","type"]),a=n.loadedName,f=document.createElement("div"),l=document.createElement("span");l.textContent=a;var c=document.createElement("a");r?(r=/url\(['"]?([^\)"']+)/.exec(r),c.href=r[1]):n.data&&(r=URL.createObjectURL(new Blob([n.data],{type:n.mimeType})),c.href=r),c.textContent="Download";var h=document.createElement("a");h.href="",h.textContent="Log",h.addEventListener("click",function(e){e.preventDefault(),console.log(n)});var p=document.createElement("input");p.setAttribute("type","checkbox"),p.dataset.fontName=a,p.addEventListener("click",function(e,t){return function(){o(t,e.checked)}}(p,a)),f.appendChild(p),f.appendChild(l),f.appendChild(document.createTextNode(" ")),f.appendChild(c),f.appendChild(document.createTextNode(" ")),f.appendChild(h),f.appendChild(u),t.appendChild(f),setTimeout(function(){this.active&&s()}.bind(this),2e3)}}}(),t,n=function(){var n=[],i=null,s=null,o=null,u=Object.create(null);return{id:"Stepper",name:"Stepper",panel:null,manager:null,init:function(n){var r=this;this.panel.setAttribute("style","padding: 5px;"),s=document.createElement("div"),o=document.createElement("select"),o.addEventListener("change",function(e){r.selectStepper(this.value)}),s.appendChild(o),i=document.createElement("div"),this.panel.appendChild(s),this.panel.appendChild(i),sessionStorage.getItem("pdfjsBreakPoints")&&(u=JSON.parse(sessionStorage.getItem("pdfjsBreakPoints"))),t=Object.create(null);for(var a in n.OPS)t[n.OPS[a]]=a},cleanup:function(){o.textContent="",i.textContent="",n=[]},enabled:!1,active:!1,create:function(t){var s=document.createElement("div");s.id="stepper"+t,s.setAttribute("hidden",!0),s.className="stepper",i.appendChild(s);var a=document.createElement("option");a.textContent="Page "+(t+1),a.value=t,o.appendChild(a);var f=u[t]||[],l=new r(s,t,f);return n.push(l),n.length===1&&this.selectStepper(t,!1),l},selectStepper:function(t,r){var i;t|=0,r&&this.manager.selectPanel(this);for(i=0;i<n.length;++i){var s=n[i];s.pageIndex===t?s.panel.removeAttribute("hidden"):s.panel.setAttribute("hidden",!0)}var u=o.options;for(i=0;i<u.length;++i){var a=u[i];a.selected=(a.value|0)===t}},saveBreakPoints:function(t,n){u[t]=n,sessionStorage.setItem("pdfjsBreakPoints",JSON.stringify(u))}}}(),r=function(){function r(e,t){var n=document.createElement(e);return t&&(n.textContent=t),n}function i(e){if(typeof e=="string"){var t=75;return e.length<=t?e:e.substr(0,t)+"..."}if(typeof e!="object"||e===null)return e;if("length"in e){var n=[],r,s,o=10;for(r=0,s=Math.min(o,e.length);r<s;r++)n.push(i(e[r]));return r<e.length&&n.push("..."),n}var u={};for(var a in e)u[a]=i(e[a]);return u}function s(e,t,n){this.panel=e,this.breakPoint=0,this.nextBreakPoint=null,this.pageIndex=t,this.breakPoints=n,this.currentIdx=-1,this.operatorListIdx=0}return s.prototype={init:function(t){var n=this.panel,i=r("div","c=continue, s=step"),s=r("table");i.appendChild(s),s.cellSpacing=0;var o=r("tr");s.appendChild(o),o.appendChild(r("th","Break")),o.appendChild(r("th","Idx")),o.appendChild(r("th","fn")),o.appendChild(r("th","args")),n.appendChild(i),this.table=s,this.updateOperatorList(t)},updateOperatorList:function(s){function u(){var e=+this.dataset.idx;this.checked?o.breakPoints.push(e):o.breakPoints.splice(o.breakPoints.indexOf(e),1),n.saveBreakPoints(o.pageIndex,o.breakPoints)}var o=this,a=15e3;if(this.operatorListIdx>a)return;var f=document.createDocumentFragment(),l=Math.min(a,s.fnArray.length);for(var h=this.operatorListIdx;h<l;h++){var p=r("tr");p.className="line",p.dataset.idx=h,f.appendChild(p);var d=this.breakPoints.indexOf(h)!==-1,v=s.argsArray[h]||[],m=r("td"),g=r("input");g.type="checkbox",g.className="points",g.checked=d,g.dataset.idx=h,g.onclick=u,m.appendChild(g),p.appendChild(m),p.appendChild(r("td",h.toString()));var y=t[s.fnArray[h]],b=v;if(y==="showText"){var w=v[0],E=[],S=[];for(var x=0;x<w.length;x++){var T=w[x];typeof T=="object"&&T!==null?S.push(T.fontChar):(S.length>0&&(E.push(S.join("")),S=[]),E.push(T))}S.length>0&&E.push(S.join("")),b=[E]}p.appendChild(r("td",y)),p.appendChild(r("td",JSON.stringify(i(b))))}if(l<s.fnArray.length){p=r("tr");var N=r("td","...");N.colspan=4,f.appendChild(N)}this.operatorListIdx=s.fnArray.length,this.table.appendChild(f)},getNextBreakPoint:function(){this.breakPoints.sort(function(e,t){return e-t});for(var t=0;t<this.breakPoints.length;t++)if(this.breakPoints[t]>this.currentIdx)return this.breakPoints[t];return null},breakIt:function(t,r){n.selectStepper(this.pageIndex,!0);var i=this,s=document;i.currentIdx=t;var o=function(e){switch(e.keyCode){case 83:s.removeEventListener("keydown",o,!1),i.nextBreakPoint=i.currentIdx+1,i.goTo(-1),r();break;case 67:s.removeEventListener("keydown",o,!1);var t=i.getNextBreakPoint();i.nextBreakPoint=t,i.goTo(-1),r()}};s.addEventListener("keydown",o,!1),i.goTo(t)},goTo:function(t){var n=this.panel.getElementsByClassName("line");for(var r=0,i=n.length;r<i;++r){var s=n[r];(s.dataset.idx|0)===t?(s.style.backgroundColor="rgb(251,250,207)",s.scrollIntoView()):s.style.backgroundColor=null}}},s}(),i=function(){function n(e){while(e.hasChildNodes())e.removeChild(e.lastChild)}function r(e){for(var n=0,r=t.length;n<r;++n)if(t[n].pageNumber===e)return n;return!1}var t=[];return{id:"Stats",name:"Stats",panel:null,manager:null,init:function(t){this.panel.setAttribute("style","padding: 5px;"),t.PDFJS.enableStats=!0},enabled:!1,active:!1,add:function(e,i){if(!i)return;var s=r(e);if(s!==!1){var o=t[s];this.panel.removeChild(o.div),t.splice(s,1)}var u=document.createElement("div");u.className="stats";var a=document.createElement("div");a.className="title",a.textContent="Page: "+e;var f=document.createElement("div");f.textContent=i.toString(),u.appendChild(a),u.appendChild(f),t.push({pageNumber:e,div:u}),t.sort(function(e,t){return e.pageNumber-t.pageNumber}),n(this.panel);for(var l=0,c=t.length;l<c;++l)this.panel.appendChild(t[l].div)},cleanup:function(){t=[],n(this.panel)}}}(),s=function(){var r=300,s=[],o=null;return{tools:[e,n,i],enable:function(e){var t=!1,n=this.tools;e.length===1&&e[0]==="all"&&(t=!0);for(var r=0;r<n.length;++r){var i=n[r];if(t||e.indexOf(i.id)!==-1)i.enabled=!0}t||n.sort(function(t,r){var i=e.indexOf(t.id);i=i<0?n.length:i;var s=e.indexOf(r.id);return s=s<0?n.length:s,i-s})},init:function(t,n){var i=document.createElement("div");i.id="PDFBug";var o=document.createElement("div");o.setAttribute("class","controls"),i.appendChild(o);var u=document.createElement("div");u.setAttribute("class","panels"),i.appendChild(u),n.appendChild(i),n.style.right=r+"px";var a=this.tools,f=this;for(var l=0;l<a.length;++l){var c=a[l],h=document.createElement("div"),p=document.createElement("button");p.textContent=c.name,p.addEventListener("click",function(e){return function(t){t.preventDefault(),f.selectPanel(e)}}(l)),o.appendChild(p),u.appendChild(h),c.panel=h,c.manager=this,c.enabled?c.init(t):h.textContent=c.name+" is disabled. To enable add "+' "'+c.id+'" to the pdfBug parameter '+"and refresh (seperate multiple by commas).",s.push(p)}this.selectPanel(0)},cleanup:function(){for(var t=0,n=this.tools.length;t<n;t++)this.tools[t].enabled&&this.tools[t].cleanup()},selectPanel:function(t){typeof t!="number"&&(t=this.tools.indexOf(t));if(t===o)return;o=t;var n=this.tools;for(var r=0;r<n.length;++r)r===t?(s[r].setAttribute("class","active"),n[r].active=!0,n[r].panel.removeAttribute("hidden")):(s[r].setAttribute("class",""),n[r].active=!1,n[r].panel.setAttribute("hidden","true"))}}}();